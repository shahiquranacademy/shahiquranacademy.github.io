<!-- Skip to Main Content (WCAG AA) -->
<a
  href="#main-content"
  class="backdrop-blur-2xl bg-black/30 border border-white/40
  sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:px-4 focus:py-2
         focus:bg-white focus:text-black focus:rounded-lg focus:shadow-lg z-50"
>
  Skip to main content
</a>

<!-- NAVBAR -->

<nav
  class="fixed top-4 left-1/2 -translate-x-1/2 z-40
         backdrop-blur-2xl bg-black/30 border border-white/40
 border border-white/30
         shadow-lg rounded-full px-6 py-3
         flex items-center justify-between
         w-[90%] max-w-4xl shadow-2xl"
  aria-label="Primary Navigation"
>
  <!-- Logo -->
  <a
    href="#"
    class="text-white font-semibold tracking-wide text-lg focus:outline-none focus:ring-4 focus:ring-white/70 rounded"
  >
    Shahi Academy
  </a>

  <!-- Desktop Menu -->
  <ul class="hidden md:flex space-x-8 text-white font-medium">
    <li><a href="#about" class="nav-link p-1">About</a></li>
    <li><a href="#services" class="nav-link p-1">Services</a></li>
    <li><a href="#social" class="nav-link p-1">Social</a></li>
    <li>
      <a href="#testimonials" class="nav-link p-1">Testimonials</a>
    </li>
    <li><a href="#contactus" class="nav-link p-1">Contact</a></li>
  </ul>

  <!-- Mobile Menu Button -->
  <button
    id="menu-btn"
    class="md:hidden text-white text-2xl focus:outline-none focus:ring-4 focus:ring-white/70"
    aria-expanded="false"
    aria-controls="mobile-menu"
  >
    â˜°
  </button>
</nav>

<!-- MOBILE MENU (Glassmorphic) -->
<div
  id="mobile-menu"
  class="hidden fixed top-20 left-1/2 -translate-x-1/2 z-40
         w-[90%] max-w-sm
         backdrop-blur-2xl bg-black/30 border border-white/40
 border border-white/40
         rounded-2xl shadow-xl p-6"
>
  <ul class="flex flex-col space-y-4 text-white text-lg font-medium">
    <li>
      <a
        href="#about"
        class="mobile-link text-[shadow:2px_2px_4px_rgba(0,0,0,0.4)]">About</a
      >
    </li>
    <li>
      <a
        href="#services"
        class="mobile-link text-[shadow:2px_2px_4px_rgba(0,0,0,0.4)]"
        >Services</a
      >
    </li>
    <li>
      <a
        href="#social"
        class="mobile-link text-[shadow:2px_2px_4px_rgba(0,0,0,0.4)]">Social</a
      >
    </li>
    <li>
      <a
        href="#testimonials"
        class="mobile-link text-[shadow:2px_2px_4px_rgba(0,0,0,0.4)]"
        >Testimonials</a
      >
    </li>
    <li>
      <a
        href="#contactus"
        class="mobile-link text-[shadow:2px_2px_4px_rgba(0,0,0,0.4)]">Contact</a
      >
    </li>
  </ul>
</div>

<script>
  import { gsap } from "gsap";

  const btn = document.getElementById("menu-btn");
  const mobileMenu = document.getElementById("mobile-menu");

  // Prepare animation
  gsap.set(mobileMenu, {
    opacity: 0,
    scale: 0,
    transformOrigin: "top right",
    display: "none",
  });

  let isOpen = false;

  function openMenu() {
    gsap.set(mobileMenu, { display: "block" });

    gsap.to(mobileMenu, {
      opacity: 1,
      scale: 1,
      duration: 0.35,
      ease: "power3.out",
    });

    btn.setAttribute("aria-expanded", "true");
    isOpen = true;
  }

  function closeMenu() {
    gsap.to(mobileMenu, {
      opacity: 0,
      scale: 0,
      duration: 0.25,
      ease: "power2.in",
      onComplete: () => gsap.set(mobileMenu, { display: "none" }),
    });

    btn.setAttribute("aria-expanded", "false");
    isOpen = false;
  }

  btn.addEventListener("click", () => {
    isOpen ? closeMenu() : openMenu();
  });

  // Close menu when clicking any mobile link
  document.querySelectorAll(".mobile-link").forEach((link) => {
    link.addEventListener("click", () => {
      if (isOpen) closeMenu();
    });
  });
</script>
